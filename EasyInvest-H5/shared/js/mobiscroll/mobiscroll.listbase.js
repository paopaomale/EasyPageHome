!function(a,b){var c=a.mobiscroll,d={invalid:[],showInput:!0,inputClass:""};c.presets.scroller.list=function(c){function e(b,c,d,e){for(var g,h=0;c>h;){var i=a(".dwwl"+h,b),j=f(e,h,d);for(g=0;g<j.length;g++)a('.dw-li[data-val="'+j[g]+'"]',i).removeClass("dw-v");h++}}function f(a,b,c){for(var d,e=0,f=c,g=[];b>e;){var h=a[e];for(d in f)if(f[d].key==h){f=f[d].children;break}e++}for(e=0;e<f.length;)f[e].invalid&&g.push(f[e].key),e++;return g}function g(a,b){for(var c=[];a;)c[--a]=!0;return c[b]=!1,c}function h(a){var b,c=[];for(b=0;a>b;b++)c[b]=t.labels&&t.labels[b]?t.labels[b]:b;return c}function i(a,c,d){var e,f,g,h=0,i=[[]],l=D;if(c)for(e=0;c>e;e++)v?i[0][e]={}:i[e]=[{}];for(;h<a.length;){for(v?i[0][h]=k(l,E[h]):i[h]=[k(l,E[h])],e=0,g=b;e<l.length&&g===b;)l[e].key==a[h]&&(d!==b&&d>=h||d===b)&&(g=e),e++;if(g!==b&&l[g].children)h++,l=l[g].children;else{if(!(f=j(l))||!f.children)return i;h++,l=f.children}}return i}function j(a,b){if(!a)return!1;for(var c,d=0;d<a.length;)if(!(c=a[d++]).invalid)return b?d-1:c;return!1}function k(a,b){for(var c={keys:[],values:[],label:b},d=0;d<a.length;)c.values.push(a[d].value),c.keys.push(a[d].key),d++;return c}function l(b,c){a(".dwfl",b).css("display","").slice(c).hide()}function m(a){for(var b,c=[],d=a,e=!0,f=0;e;)b=j(d),c[f++]=b.key,e=b.children,e&&(d=e);return c}function n(a,c){var d,e,f,g=[],h=D,i=0,k=!1;if(a[i]!==b&&c>=i)for(d=0,e=a[i],f=b;d<h.length&&f===b;)h[d].key!=a[i]||h[d].invalid||(f=d),d++;else f=j(h,!0),e=h[f].key;for(k=f!==b?h[f].children:!1,g[i]=e;k;){if(h=h[f].children,i++,k=!1,f=b,a[i]!==b&&c>=i)for(d=0,e=a[i],f=b;d<h.length&&f===b;)h[d].key!=a[i]||h[d].invalid||(f=d),d++;else f=j(h,!0),f=f===!1?b:f,e=h[f].key;k=f!==b&&j(h[f].children)?h[f].children:!1,g[i]=e}return{lvl:i+1,nVector:g}}function o(d){var e=[];return z=z>A++?z:A,d.children("li").each(function(d){var f=a(this),g=f.clone();g.children("ul,ol").remove();var h=c._processMarkup?c._processMarkup(g):g.html().replace(/^\s\s*/,"").replace(/\s\s*$/,""),i=f.attr("data-invalid")?!0:!1,j={key:f.attr("data-val")===b||null===f.attr("data-val")?d:f.attr("data-val"),value:h,invalid:i,children:null},k=f.children("ul,ol");k.length&&(j.children=o(k)),e.push(j)}),A--,e}var p,q,r,s=a.extend({},c.settings),t=a.extend(c.settings,d,s),u=t.layout||(/top|bottom/.test(t.display)?"liquid":""),v="liquid"==u,w=t.readonly,x=a(this),y=this.id+"_dummy",z=0,A=0,B={},C=[],D=t.wheelArray||o(x),E=h(z),F=m(D),G=i(F,z);return a("#"+y).remove(),t.showInput&&(p=a('<input type="text" id="'+y+'" value="" class="'+t.inputClass+'" placeholder="'+(t.placeholder||"")+'" readonly />').insertBefore(x),t.anchor=p,c.attachShow(p)),t.wheelArray||x.hide().closest(".ui-field-contain").trigger("create"),{width:50,wheels:G,layout:u,headerText:!1,formatValue:function(a){return r===b&&(r=n(a,a.length).lvl),a.slice(0,r).join(" ")},parseValue:function(a){return a?(a+"").split(" "):(t.defaultValue||F).slice(0)},onBeforeShow:function(){var a=c.getArrayVal(!0);C=a.slice(0),t.wheels=i(a,z,z),q=!0},onValueFill:function(a){r=b,p&&p.val(a)},onShow:function(b){a(".dwwl",b).on("mousedown touchstart",function(){clearTimeout(B[a(".dwwl",b).index(this)])})},onDestroy:function(){p&&p.remove(),x.show()},validate:function(a,d,f){var h,j,k=[],m=c.getArrayVal(!0),o=(d||0)+1;if(d!==b&&C[d]!=m[d]||d===b&&!q){for(t.wheels=i(m,null,d),j=n(m,d===b?m.length:d),r=j.lvl,h=0;h<m.length;h++)m[h]=j.nVector[h]||0;for(;o<j.lvl;)k.push(o++);if(k.length)return t.readonly=g(z,d),clearTimeout(B[d]),B[d]=setTimeout(function(){q=!0,l(a,j.lvl),C=m.slice(0),c.changeWheel(k,d===b?f:0,d!==b),t.readonly=w},d===b?0:1e3*f),!1}else j=n(m,m.length),r=j.lvl;C=m.slice(0),e(a,j.lvl,D,m),l(a,j.lvl),q=!1}}}}(jQuery);