!function(a,b,c,d){var e=a.mobiscroll,f=e.classes,g=e.util,h=g.jsPrefix,i=g.has3d,j=g.hasFlex,k=g.getCoord,l=g.constrain,m=g.testTouch;e.presetShort("scroller","Scroller",!1),f.Scroller=function(b,e,n){function o(b){!m(b,this)||_||T||L||x(this)||(b.preventDefault(),b.stopPropagation(),M="clickpick"!=Q.mode,_=a(".dw-ul",this),z(_),U=fa[aa]!==d,Y=U?B(_):ga[aa],V=k(b,"Y",!0),W=new Date,X=V,D(_,aa,Y,.001),M&&_.closest(".dwwl").addClass("dwa"),"mousedown"===b.type&&a(c).on("mousemove",p).on("mouseup",q))}function p(a){_&&M&&(a.preventDefault(),a.stopPropagation(),X=k(a,"Y",!0),(Math.abs(X-V)>3||U)&&(D(_,aa,l(Y+(V-X)/N,Z-1,$+1)),U=!0))}function q(b){if(_){var d,e,f=new Date-W,g=l(Math.round(Y+(V-X)/N),Z-1,$+1),h=g,j=_.offset().top;if(b.stopPropagation(),"mouseup"===b.type&&a(c).off("mousemove",p).off("mouseup",q),i&&300>f?(d=(X-V)/f,e=d*d/Q.speedUnit,0>X-V&&(e=-e)):e=X-V,U)h=l(Math.round(Y-e/N),Z,$),f=d?Math.max(.1,Math.abs((h-g)/d)*Q.timeUnit):.1;else{var k=Math.floor((X-j)/N),m=a(a(".dw-li",_)[k]),n=m.hasClass("dw-v"),o=M;if(f=.1,S("onValueTap",[m])!==!1&&n?h=k:o=!0,o&&n&&(m.addClass("dw-hl"),setTimeout(function(){m.removeClass("dw-hl")},100)),!O&&(Q.confirmOnTap===!0||Q.confirmOnTap[aa])&&m.hasClass("dw-sel"))return da.select(),void(_=!1)}M&&G(_,aa,h,0,f,!0),_=!1}}function r(b){L=a(this),m(b,this)&&w(b,L.closest(".dwwl"),L.hasClass("dwwbp")?H:I),"mousedown"===b.type&&a(c).on("mouseup",s)}function s(b){L=null,T&&(clearInterval(ca),T=!1),"mouseup"===b.type&&a(c).off("mouseup",s)}function t(b){38==b.keyCode?w(b,a(this),I):40==b.keyCode&&w(b,a(this),H)}function u(){T&&(clearInterval(ca),T=!1)}function v(b){if(!x(this)){b.preventDefault(),b=b.originalEvent||b;var c=b.deltaY||b.wheelDelta||b.detail,d=a(".dw-ul",this);z(d),D(d,aa,l(((0>c?-20:20)-P[aa])/N,Z-1,$+1)),clearTimeout(R),R=setTimeout(function(){G(d,aa,Math.round(ga[aa]),c>0?1:2,.1)},200)}}function w(a,b,c){if(a.stopPropagation(),a.preventDefault(),!T&&!x(b)&&!b.hasClass("dwa")){T=!0;var d=b.find(".dw-ul");z(d),clearInterval(ca),ca=setInterval(function(){c(d)},Q.delay),c(d)}}function x(b){if(a.isArray(Q.readonly)){var c=a(".dwwl",K).index(b);return Q.readonly[c]}return Q.readonly}function y(b){var c='<div class="dw-bf">',d=ha[b],e=1,f=d.labels||[],g=d.values||[],h=d.keys||g;return a.each(g,function(a,b){e%20===0&&(c+='</div><div class="dw-bf">'),c+='<div role="option" aria-selected="false" class="dw-li dw-v" data-val="'+h[a]+'"'+(f[a]?' aria-label="'+f[a]+'"':"")+' style="height:'+N+"px;line-height:"+N+'px;"><div class="dw-i"'+(ba>1?' style="line-height:'+Math.round(N/ba)+"px;font-size:"+Math.round(N/ba*.8)+'px;"':"")+">"+b+"</div></div>",e++}),c+="</div>"}function z(b){O=b.closest(".dwwl").hasClass("dwwms"),Z=a(".dw-li",b).index(a(O?".dw-li":".dw-v",b).eq(0)),$=Math.max(Z,a(".dw-li",b).index(a(O?".dw-li":".dw-v",b).eq(-1))-(O?Q.rows-("scroller"==Q.mode?1:3):0)),aa=a(".dw-ul",K).index(b)}function A(a){var c=Q.headerText;return c?"function"==typeof c?c.call(b,a):c.replace(/\{value\}/i,a):""}function B(a){return Math.round(-g.getPosition(a,!0)/N)}function C(a,b){clearTimeout(fa[b]),delete fa[b],a.closest(".dwwl").removeClass("dwa")}function D(a,b,c,d,e){var f=-c*N,j=a[0].style;f==P[b]&&fa[b]||(P[b]=f,i?(j[h+"Transition"]=g.prefix+"transform "+(d?d.toFixed(3):0)+"s ease-out",j[h+"Transform"]="translate3d(0,"+f+"px,0)"):j.top=f+"px",fa[b]&&C(a,b),d&&e&&(a.closest(".dwwl").addClass("dwa"),fa[b]=setTimeout(function(){C(a,b)},1e3*d)),ga[b]=c)}function E(b,c,d,e,f){var g,h=a('.dw-li[data-val="'+b+'"]',c),i=a(".dw-li",c),j=i.index(h),k=i.length;if(e)z(c);else if(!h.hasClass("dw-v")){for(var m=h,n=h,o=0,p=0;j-o>=0&&!m.hasClass("dw-v");)o++,m=i.eq(j-o);for(;k>j+p&&!n.hasClass("dw-v");)p++,n=i.eq(j+p);(o>p&&p&&2!==d||!o||0>j-o||1==d)&&n.hasClass("dw-v")?(h=n,j+=p):(h=m,j-=o)}return g=h.hasClass("dw-sel"),f&&(e||(a(".dw-sel",c).removeAttr("aria-selected"),h.attr("aria-selected","true")),a(".dw-sel",c).removeClass("dw-sel"),h.addClass("dw-sel")),{selected:g,v:e?l(j,Z,$):j,val:h.hasClass("dw-v")||e?h.attr("data-val"):null}}function F(b,c,e,f,g){S("validate",[K,c,b,f])!==!1&&(a(".dw-ul",K).each(function(e){var h=a(this),i=h.closest(".dwwl").hasClass("dwwms"),j=e==c||c===d,k=E(da._tempWheelArray[e],h,f,i,!0),l=k.selected;(!l||j)&&(da._tempWheelArray[e]=k.val,D(h,e,k.v,j?b:.1,j?g:!1))}),S("onValidated",[c]),da._tempValue=Q.formatValue(da._tempWheelArray,da),da.live&&(da._hasValue=e||da._hasValue,J(e,e,0,!0)),da._header.html(A(da._tempValue)),e&&S("onChange",[da._tempValue]))}function G(b,c,d,e,f,g){d=l(d,Z,$),da._tempWheelArray[c]=a(".dw-li",b).eq(d).attr("data-val"),D(b,c,d,f,g),setTimeout(function(){F(f,c,!0,e,g)},10)}function H(a){var b=ga[aa]+1;G(a,aa,b>$?Z:b,1,.1)}function I(a){var b=ga[aa]-1;G(a,aa,Z>b?$:b,2,.1)}function J(a,b,c,d,e){da._isVisible&&!d&&F(c),da._tempValue=Q.formatValue(da._tempWheelArray,da),e||(da._wheelArray=da._tempWheelArray.slice(0),da._value=da._hasValue?da._tempValue:null),a&&(S("onValueFill",[da._hasValue?da._tempValue:"",b]),da._isInput&&ea.val(da._hasValue?da._tempValue:""),b&&(da._preventChange=!0,ea.change()))}var K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da=this,ea=a(b),fa={},ga={},ha=[];f.Frame.call(this,b,e,!0),da.setVal=da._setVal=function(c,e,f,g,h){da._hasValue=null!==c&&c!==d,da._tempWheelArray=a.isArray(c)?c.slice(0):Q.parseValue.call(b,c,da)||[],J(e,f===d?e:f,h,!1,g)},da.getVal=da._getVal=function(a){var b=da._hasValue||a?da[a?"_tempValue":"_value"]:null;return g.isNumeric(b)?+b:b},da.setArrayVal=da.setVal,da.getArrayVal=function(a){return a?da._tempWheelArray:da._wheelArray},da.setValue=function(a,b,c,d,e){da.setVal(a,b,e,d,c)},da.getValue=da.getArrayVal,da.changeWheel=function(b,c,e){if(K){var f=0,g=b.length;a.each(Q.wheels,function(h,i){return a.each(i,function(h,i){return a.inArray(f,b)>-1&&(ha[f]=i,a(".dw-ul",K).eq(f).html(y(f)),g--,!g)?(da.position(),F(c,d,e),!1):void f++}),g?void 0:!1})}},da.getValidCell=E,da.scroll=D,da._generateContent=function(){var b,c="",e=0;return a.each(Q.wheels,function(f,g){c+='<div class="mbsc-w-p dwc'+("scroller"!=Q.mode?" dwpm":" dwsc")+(Q.showLabel?"":" dwhl")+'"><div class="dwwc"'+(Q.maxWidth?"":' style="max-width:600px;"')+">"+(j?"":'<table class="dw-tbl" cellpadding="0" cellspacing="0"><tr>'),a.each(g,function(a,f){ha[e]=f,b=f.label!==d?f.label:a,c+="<"+(j?"div":"td")+' class="dwfl" style="'+(Q.fixedWidth?"width:"+(Q.fixedWidth[e]||Q.fixedWidth)+"px;":(Q.minWidth?"min-width:"+(Q.minWidth[e]||Q.minWidth)+"px;":"min-width:"+Q.width+"px;")+(Q.maxWidth?"max-width:"+(Q.maxWidth[e]||Q.maxWidth)+"px;":""))+'"><div class="dwwl dwwl'+e+(f.multiple?" dwwms":"")+'">'+("scroller"!=Q.mode?'<div class="dwb-e dwwb dwwbp '+(Q.btnPlusClass||"")+'" style="height:'+N+"px;line-height:"+N+'px;"><span>+</span></div><div class="dwb-e dwwb dwwbm '+(Q.btnMinusClass||"")+'" style="height:'+N+"px;line-height:"+N+'px;"><span>&ndash;</span></div>':"")+'<div class="dwl">'+b+'</div><div tabindex="0" aria-live="off" aria-label="'+b+'" role="listbox" class="dwww"><div class="dww" style="height:'+Q.rows*N+'px;"><div class="dw-ul" style="margin-top:'+(f.multiple?"scroller"==Q.mode?0:N:Q.rows/2*N-N/2)+'px;">',c+=y(e)+'</div></div><div class="dwwo"></div></div><div class="dwwol"'+(Q.selectedLineHeight?' style="height:'+N+"px;margin-top:-"+(N/2+(Q.selectedLineBorder||0))+'px;"':"")+"></div></div>"+(j?"</div>":"</td>"),e++}),c+=(j?"":"</tr></table>")+"</div></div>"}),c},da._attachEvents=function(a){a.on("keydown",".dwwl",t).on("keyup",".dwwl",u).on("touchstart mousedown",".dwwl",o).on("touchmove",".dwwl",p).on("touchend",".dwwl",q).on("touchstart mousedown",".dwwb",r).on("touchend touchcancel",".dwwb",s),Q.mousewheel&&a.on("wheel mousewheel",".dwwl",v)},da._markupReady=function(a){K=a,P={},F()},da._fillValue=function(){da._hasValue=!0,J(!0,!0,0,!0)},da._readValue=function(){var a=ea.val()||"";""!==a&&(da._hasValue=!0),da._tempWheelArray=da._hasValue&&da._wheelArray?da._wheelArray.slice(0):Q.parseValue.call(b,a,da)||[],J()},da._processSettings=function(){Q=da.settings,S=da.trigger,N=Q.height,ba=Q.multiline,da._isLiquid="liquid"===(Q.layout||(/top|bottom/.test(Q.display)&&1==Q.wheels.length?"liquid":"")),Q.formatResult&&(Q.formatValue=Q.formatResult),ba>1&&(Q.cssClass=(Q.cssClass||"")+" dw-ml"),"scroller"!=Q.mode&&(Q.rows=Math.max(3,Q.rows))},da._selectedValues={},n||da.init(e)},f.Scroller.prototype={_hasDef:!0,_hasTheme:!0,_hasLang:!0,_hasPreset:!0,_class:"scroller",_defaults:a.extend({},f.Frame.prototype._defaults,{minWidth:80,height:40,rows:3,multiline:1,delay:300,readonly:!1,showLabel:!0,confirmOnTap:!0,wheels:[],mode:"scroller",preset:"",speedUnit:.0012,timeUnit:.08,formatValue:function(a){return a.join(" ")},parseValue:function(b,c){var e,f,g=[],h=[],i=0;return null!==b&&b!==d&&(g=(b+"").split(" ")),a.each(c.settings.wheels,function(b,c){a.each(c,function(b,c){f=c.keys||c.values,e=f[0],a.each(f,function(a,b){return g[i]==b?(e=b,!1):void 0}),h.push(e),i++})}),h}})},e.themes.scroller=e.themes.frame}(jQuery,window,document);