!function(a,b){var c=a.mobiscroll,d=c.util,e=d.isString,f={batch:40,inputClass:"",invalid:[],rtl:!1,showInput:!0,groupLabel:"Groups",checkIcon:"checkmark",dataText:"text",dataValue:"value",dataGroup:"group",dataDisabled:"disabled"};c.presetShort("select"),c.presets.scroller.select=function(c){function g(){var c,d,e,f,g,h=0,i=0,j={};ea={},fa={},y=[],s=[],ca.length=0,X?a.each(K.data,function(a,h){f=h[K.dataText],g=h[K.dataValue],d=h[K.dataGroup],e={value:g,text:f,index:a},ea[g]=e,y.push(e),Y&&(j[d]===b?(c={text:d,value:i,options:[],index:i},fa[i]=c,j[d]=i,s.push(c),i++):c=fa[j[d]],_&&(e.index=c.options.length),e.group=j[d],c.options.push(e)),h[K.dataDisabled]&&ca.push(g)}):Y?a("optgroup",O).each(function(b){fa[b]={text:this.label,value:b,options:[],index:b},s.push(fa[b]),a("option",this).each(function(a){e={value:this.value,text:this.text,index:_?a:h++,group:b},ea[this.value]=e,y.push(e),fa[b].options.push(e),this.disabled&&ca.push(this.value)})}):a("option",O).each(function(a){e={value:this.value,text:this.text,index:a},ea[this.value]=e,y.push(e),this.disabled&&ca.push(this.value)}),y.length&&(q=y[0].value),aa&&(y=[],h=0,a.each(fa,function(b,c){g="__group"+b,e={text:c.text,value:g,group:b,index:h++},ea[g]=e,y.push(e),ca.push(e.value),a.each(c.options,function(a,b){b.index=h++,y.push(b)})}))}function h(a,c,d,e,f,g,h){var i,j,k=[],l=[],m=d[e]!==b?d[e].index:0,n=Math.max(0,m-L),o=Math.min(c.length-1,n+2*L);if(F[f]!==n||G[f]!==o){for(i=n;o>=i;i++)l.push(c[i].text),k.push(c[i].value);E[f]=!0,H[f]=n,I[f]=o,j={multiple:g,values:l,keys:k,label:h},N?a[0][f]=j:a[f]=[j]}else E[f]=!1}function i(a){h(a,s,fa,r,v,!1,K.groupLabel)}function j(a){h(a,_?fa[r].options:y,ea,A,z,P,T)}function k(){var a=[[]];return $&&i(a),j(a),a}function l(c){P&&(c&&e(c)&&(c=c.split(",")),a.isArray(c)&&(c=c[0])),A=c!==b&&null!==c&&""!==c&&ea[c]?c:q,$&&(r=ea[A]?ea[A].group:null,C=r)}function m(a,b){var d=a?c._tempWheelArray:c._hasValue?c._wheelArray:null;return d?K.group&&b?d:d[z]:null}function n(){var a,b,d=[],e=0;if(P){b=[];for(e in da)d.push(ea[e]?ea[e].text:""),b.push(e);a=d.join(", ")}else b=A,a=ea[A]?ea[A].text:"";c._tempValue=b,x.val(a),O.val(b)}function o(a){var b=a.attr("data-val"),c=a.hasClass("dw-msel");return P&&a.closest(".dwwl").hasClass("dwwms")?(a.hasClass("dw-v")&&(c?(a.removeClass(U).removeAttr("aria-selected"),delete da[b]):d.objectToArray(da).length<Q&&(a.addClass(U).attr("aria-selected","true"),da[b]=b)),!1):void(a.hasClass("dw-w-gr")&&(u=a.attr("data-val")))}var p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E={},F={},G={},H={},I={},J=a.extend({},c.settings),K=a.extend(c.settings,f,J),L=K.batch,M=K.layout||(/top|bottom/.test(K.display)?"liquid":""),N="liquid"==M,O=a(this),P=K.multiple||O.prop("multiple"),Q=d.isNumeric(K.multiple)?K.multiple:1/0,R=this.id+"_dummy",S=a('label[for="'+this.id+'"]').attr("for",R),T=K.label!==b?K.label:S.length?S.text():O.attr("name"),U="dw-msel mbsc-ic mbsc-ic-"+K.checkIcon,V=K.readonly,W=K.data,X=!!W,Y=X?!!K.group:a("optgroup",O).length,Z=K.group,$=Y&&Z&&Z.groupWheel!==!1,_=Y&&Z&&$&&Z.clustered===!0,aa=Y&&(!Z||Z.header!==!1&&!_),ba=O.val()||[],ca=[],da={},ea={},fa={};if(K.invalid.length||(K.invalid=ca),$?(v=0,z=1):(v=-1,z=0),P)for(O.prop("multiple",!0),ba&&e(ba)&&(ba=ba.split(",")),w=0;w<ba.length;w++)da[ba[w]]=ba[w];return g(),l(O.val()),a("#"+R).remove(),O.next().is("input.mbsc-control")?x=O.off(".mbsc-form").next().removeAttr("tabindex"):(x=a('<input type="text" id="'+R+'" class="mbsc-control mbsc-control-ev '+K.inputClass+'" readonly />'),K.showInput&&x.insertBefore(O)),c.attachShow(x.attr("placeholder",K.placeholder||"")),O.addClass("dw-hsel").attr("tabindex",-1).closest(".ui-field-contain").trigger("create"),n(),c.setVal=function(a,b,f,g,h){P&&(a&&e(a)&&(a=a.split(",")),da=d.arrayToObject(a),a=a?a[0]:null),c._setVal(a,b,f,g,h)},c.getVal=function(a,b){return P?d.objectToArray(da):m(a,b)},c.refresh=function(){g(),F={},G={},K.wheels=k(),F[v]=H[v],G[v]=I[v],F[z]=H[z],G[z]=I[z],p=!0,l(A),c._tempWheelArray=$?[r,A]:[A],c._isVisible&&c.changeWheel($?[v,z]:[z])},c.getValues=c.getVal,c.getValue=m,{width:50,layout:M,headerText:!1,anchor:x,confirmOnTap:$?[!1,!0]:!0,formatValue:function(a){var b,c,d=[];if(P){for(b in da)d.push(ea[b]?ea[b].text:"");return d.join(", ")}return c=a[z],ea[c]?ea[c].text:""},parseValue:function(a){return l(a===b?O.val():a),$?[r,A]:[A]},onValueTap:o,onValueFill:n,onBeforeShow:function(){P&&K.counter&&(K.headerText=function(){var b=0;return a.each(da,function(){b++}),(b>1?K.selectedPluralText||K.selectedText:K.selectedText).replace(/{count}/,b)}),l(O.val()),$&&(c._tempWheelArray=[r,A]),c.refresh()},onMarkupReady:function(b){b.addClass("dw-select"),a(".dwwl"+v,b).on("mousedown touchstart",function(){clearTimeout(D)}),a(".dwwl"+z,b).on("mousedown touchstart",function(){t||clearTimeout(D)}),aa&&a(".dwwl"+z,b).addClass("dw-select-gr"),P&&(b.addClass("dwms"),a(".dwwl",b).on("keydown",function(b){32==b.keyCode&&(b.preventDefault(),b.stopPropagation(),o(a(".dw-sel",this)))}).eq(z).attr("aria-multiselectable","true"),B=a.extend({},da))},validate:function(d,e,f,g){var h,k,l=[],m=c.getArrayVal(!0),n=m[v],o=m[z],q=a(".dw-ul",d).eq(v),w=a(".dw-ul",d).eq(z);if(F[v]>1&&a(".dw-li",q).slice(0,2).removeClass("dw-v").addClass("dw-fv"),G[v]<s.length-2&&a(".dw-li",q).slice(-2).removeClass("dw-v").addClass("dw-fv"),F[z]>1&&a(".dw-li",w).slice(0,2).removeClass("dw-v").addClass("dw-fv"),G[z]<(_?fa[n].options:y).length-2&&a(".dw-li",w).slice(-2).removeClass("dw-v").addClass("dw-fv"),!p&&(A=o,$&&(r=ea[A].group,(e===b||e===v)&&(r=+m[v],t=!1,r!==C?(A=fa[r].options[0].value,F[z]=null,G[z]=null,t=!0,K.readonly=[!1,!0]):K.readonly=V)),Y&&(/__group/.test(A)||u)&&(A=fa[ea[u||A].group].options[0].value,o=A,u=!1),c._tempWheelArray=$?[n,o]:[o],$&&(i(K.wheels),E[v]&&l.push(v)),j(K.wheels),E[z]&&l.push(z),clearTimeout(D),D=setTimeout(function(){l.length&&(p=!0,t=!1,C=r,F[v]=H[v],G[v]=I[v],F[z]=H[z],G[z]=I[z],c._tempWheelArray=$?[n,A]:[A],c.changeWheel(l,0,e!==b)),$&&(e===z&&c.scroll(q,v,c.getValidCell(r,q,g,!1,!0).v,.1),c._tempWheelArray[v]=r),K.readonly=V},e===b?100:1e3*f),l.length))return t?!1:!0;if(e===b&&P){k=da,h=0,a(".dwwl"+z+" .dw-li",d).removeClass(U).removeAttr("aria-selected");for(h in k)a(".dwwl"+z+' .dw-li[data-val="'+k[h]+'"]',d).addClass(U).attr("aria-selected","true")}aa&&a('.dw-li[data-val^="__group"]',d).addClass("dw-w-gr"),a.each(K.invalid,function(b,c){a('.dw-li[data-val="'+c+'"]',w).removeClass("dw-v dw-fv")}),p=!1},onValidated:function(){A=c._tempWheelArray[z]},onClear:function(b){da={},x.val(""),a(".dwwl"+z+" .dw-li",b).removeClass(U).removeAttr("aria-selected")},onCancel:function(){!c.live&&P&&(da=a.extend({},B))},onDestroy:function(){x.hasClass("mbsc-control")||x.remove(),O.removeClass("dw-hsel").removeAttr("tabindex")}}}}(jQuery);