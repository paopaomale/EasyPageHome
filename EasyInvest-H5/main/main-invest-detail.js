define(["butterfly/view","butterfly","main/main-client","moment"],function(a,b,c){return a.extend({events:{"click .go-back":"goBack"},render:function(a){var b=a.id;this.renderHtml(b)},onShow:function(){},renderHtml:function(a){var b=this,d={id:a};c.ajax({url:c.PRODUCT_DETAIL_URL,data:d,beforeSend:function(){},success:function(a){if(a&&0===a.result&&a.data){b.$(".content-title").html(a.data.name);var c=a.data.timestamp&&moment(a.data.timestamp).format("YYYY-MM-DD HH:mm");b.$(".content-time").html(c);var d=b.genContentDom(a.data.content);b.$(".content-body").html(d)}},complete:function(){}})},genContentDom:function(a){var b=document.createElement("div");return b.innerHTML=a,_.forEach($(b).find("img"),function(a){var b=$(a).attr("src");b&&b.indexOf&&0===b.indexOf("/")&&(a.src=window._serverBasePath+b)}),b}})});