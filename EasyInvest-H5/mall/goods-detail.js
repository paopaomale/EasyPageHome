define(["butterfly/view","butterfly","../mall/mall-client","listview/listView","../shared/js/datasource","swipe","iscrollprobe"],function(a,b,c,d,e){return a.extend({events:{"click .go-back":"goBack","click .menuLi":"goodsList"},render:function(){console.log("render")},onShow:function(){this.initAdSwiper(),this.initIscroller()},initAdSwiper:function(){var a=this;this.$el.find("#adSwipe .swiper-container");console.log(a.$("#adSwipe .swiper-container")[0]),a.swipe1=new Swipe(a.$("#adSwipe .swiper-container")[0],{continuous:!0,callback:function(b){a.adCount<=b&&(b-=a.adCount),a.$(".addImg-pagination > span.active").removeClass("active"),$(a.$(".addImg-pagination > span")[b]).addClass("active")}})},initIscroller:function(){var a=this;a.imgScroll=new IScroll(a.$("#goods-detail-wrapper")[0],{bounce:!1,probeType:2});var b=function(){a.setHeader(this)};a.imgScroll&&a.imgScroll.on("scroll",b)},setHeader:function(a){var b=this;if(b.isGoodsDown)return b.isGoodsDown=!1,b.$(".header.opa").removeClass("opa"),b.$(".header").css("background-color","rgba(255,255,255,1)"),b.$(".background-i").css("background-color","rgba(0,0,0,0)"),b.$(".header .showColor").removeClass("showColor"),void b.$(".header .showColorH1").removeClass("showColorH1");if(0!=b.isGoodsDown){var c=-a.y,d=b.$(".header").width()-b.$(".header").innerHeight();if(0>c?b.$(".header").css("background-color","rgba(255,255,255,0)"):c>d?b.$(".header").css("background-color","rgba(255,255,255,1)"):b.$(".header").css("background-color","rgba(255,255,255,"+c/d+")"),0>c)b.$(".header").addClass("opa"),b.$(".header .background-i").css("background-color","rgba(0,0,0,0.3)");else if(c>d/2){b.$(".header.opa").removeClass("opa"),b.$(".header .background-i").css("background-color","rgba(0,0,0,0)");var e=c/(d/2)-1;e=e>1?1:e,b.$(".showColor").css("color","rgba(153,153,153,"+e+")"),b.$(".showColorH1").css("opacity",e)}else{var f=.3-c/(2*d),g=1-c/(d/2);f>0?(b.$(".header").addClass("opa"),f=f):(b.$(".header.opa").removeClass("opa"),f=0),b.$(".showColor").css("color","rgba(255,255,255,"+g+")"),b.$(".header .background-i").css("background-color","rgba(0,0,0,"+f+")")}}}})});