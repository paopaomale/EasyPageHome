define(["backbone","shared/js/socket.io"],function(a,b){var c={};return _.extend(c,a.Events),c.init=function(a,c,d){var e=this;return a&&c&&d?(this.roomId=a,this.userId=c,this.userName=d,this.socket=b.connect("ws://120.24.76.244:3000"),this.socket.emit("login",{userId:c,userName:d,roomId:a}),this.socket.on("login",function(a){e.trigger("login",a)}),this.socket.on("logout",function(a){e.trigger("logout",a)}),void this.socket.on("message",function(a){e.trigger("message",a)})):void console.log("缺少参数有问题")},c.submit=function(a){a&&this.socket.emit("message",{userId:this.userId,userName:this.userName,roomId:this.roomId,content:a})},c._genUid=function(){return(new Date).getTime()+""+Math.floor(899*Math.random()+100)},c.close=function(){this.socket.disconnect()},c});