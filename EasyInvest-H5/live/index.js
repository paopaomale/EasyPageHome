define(["butterfly/view","butterfly","shared/js/datasource","listview/ListView","swipe"],function(a,b,c,d,e){return a.extend({events:{"click #go":"close","click .navButton":"onNavButtonClick","click .btn":"onBtn","click .ILCTTimetable":"showTimeTable","touchstart .scroller":"onTouchStart","touchend .scroller":"onTouchEnd","touchmove .scroller":"onTouchMove"},render:function(){a.prototype.render.call(this),console.log("render1111")},onShow:function(){this.initListviewSwipe(),this.initAdSwipe(),this.initListview(0)},onBtn:function(){butterfly.navigate("live/live-video.html")},showTimeTable:function(){alert("showTimeTable")},initListview:function(a){0===a?this.initLiveListview():this.initNewsListView(a)},initLiveListview:function(){var a=this;if(!this.listview0){var b=new c({storage:"none",identifier:"Datasource0",url:"../live/data/live-new-listview1.json",requestParams:{time:"12"}}),e=this.$("#one-listview"),f=_.template(a.$("#listview-live-template").html());this.listview0=new d({id:"listview0",el:e,autoLoad:!0,itemTemplate:f,dataSource:b,isPullToRefresh:!1})}},initNewsListView:function(a){var b=this;if(!this["listview"+a]){this["Datasource"+a]=new c({storage:"none",identifier:"Datasource"+a,url:"../live/data/live-new-listview"+(a+1)+".json",requestParams:{channelId:a-1}});var e=this.$(".listview"+(a+1)),f=_.template(b.$("#listview-common-template").html());this["listview"+a]=new d({id:"listview"+a,el:e,autoLoad:!0,itemTemplate:f,dataSource:b["Datasource"+a],isPullToRefresh:!1})}},initAdSwipe:function(){this.adSwipe||(this.adSwipe=this.$(".adSwipe").Swipe({startSlide:0,speed:3e3,auto:1e3,continuous:!0,disableScroll:!1,stopPropagation:!1,closeEndMotion:!0}))},initListviewSwipe:function(){var a=this;this.listviewSwipe||(this.listviewSwipe=new Swipe(a.$(".listviewSwipe")[0],{startSlide:0,continuous:!1,closeEndMotion:!0,callback:function(b,c){a.navSlide(b),a.initListview(b)},transitionEnd:function(a,b){}}))},onNavButtonClick:function(a){var b=$(a.currentTarget),c=b.attr("data-value"),d=parseInt(c);this.listviewSwipe.slide(d,300)},navSlide:function(a){this.$(".navButton").removeClass("active").eq(a).addClass("active"),this.$(".scroll-lite").css("left",100*a+"%")},onTouchStart:function(a){this.touchFirst=!0,this.listviewSwipe&&this.listviewSwipe.pause(),this.swipeIndex=this.listviewSwipe.getPos(),this["listview"+this.swipeIndex]&&this["listview"+this.swipeIndex].IScroll&&(this["listview"+this.swipeIndex].IScroll.enabled=!1),this.lastX=a.originalEvent.touches[0].clientX,this.lastY=a.originalEvent.touches[0].clientY},onTouchMove:function(a){if(this.touchFirst===!0){this.clientX=a.originalEvent.touches[0].clientX,this.clientY=a.originalEvent.touches[0].clientY;var b=(Math.abs(this.clientX-this.lastX),Math.abs(this.clientY-this.lastY),Math.abs(this.clientX-this.lastX)/Math.abs(this.clientY-this.lastY));1>b||1===b?this["listview"+this.swipeIndex]&&this["listview"+this.swipeIndex].IScroll&&(this["listview"+this.swipeIndex].IScroll.enabled=!0,this.touchFirst=!1):b>1&&(this.listviewSwipe.resume(),this.touchFirst=!1)}},onTouchEnd:function(){delete this.touchFirst,this["listview"+this.swipeIndex]&&this["listview"+this.swipeIndex].IScroll&&(this["listview"+this.swipeIndex].IScroll.enabled=!0)}})});