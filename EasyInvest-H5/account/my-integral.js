define(["butterfly/view","butterfly","listview/ListView","../shared/js/datasource","../account/account-client"],function(a,b,c,d,e){return a.extend({events:{"click .go-back":"goBack"},render:function(){console.log("render"),this._initView(),this.initListView()},onShow:function(){console.log("render")},_initView:function(){var a=this,b=JSON.parse(localStorage.getItem("myInfoData")).data.user;switch(b.rank){case 0:a.$("#vipLevel").html("普通会员");break;case 1:a.$("#vipLevel").html("白银会员");break;case 2:a.$("#vipLevel").html("黄金会员");break;default:a.$("#vipLevel").html("普通会员")}a.$("#userPoints").html(b.points)},initListView:function(){var a=this;a.datasource=new d({storage:"session",identifier:"my-message",url:e.GET_INTEGRAL_LIST_URL,pageParam:"pageIndex"});var b=this.el.querySelector("#integral-list"),f=_.template(this.$("#integral-list-template").html());a.listview=new c({id:"integral-list",el:b,autoLoad:"true",itemTemplate:f,dataSource:this.datasource}),a.listenTo(this.listview,"itemSelect",this.onItemSelect)}})});