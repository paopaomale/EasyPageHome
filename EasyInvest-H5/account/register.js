define(["butterfly/view","butterfly","text!account/register.html","account/account-client","notification"],function(a,b,c,d,e){return a.extend({events:{"click .go-back":"goBack","click .register_box_row":"focusInput","click .getCode":"getCode","click #submite":"goRegister"},render:function(){console.log("render")},onShow:function(){console.log("render")},focusInput:function(a){$(a.currentTarget).find("input").focus()},getCode:function(a){a.stopPropagation(),console.log("getCode");var b=this.$("#phone input").val().trim();if(""===b)return void e.show({type:"info",message:"手机号不能为空"});var c={phone:b};d.ajax({url:d.SMS_URL,type:"post",data:c,beforeSend:function(){},success:function(a){a&&0===a.result},error:function(a){},complete:function(){}})},goRegister:function(){console.log("goRegister");var a=this.$("#name input").val().replace(/(^\s*)|(\s*$)/g,""),b=this.$("#phone input").val().replace(/(^\s*)|(\s*$)/g,""),c=this.$("#code input").val().replace(/(^\s*)|(\s*$)/g,""),e=this.$("#referral input").val().replace(/(^\s*)|(\s*$)/g,""),f=this.$("#password input").val(),g=this.$("#check-password input").val(),h={name:a,username:b,code:c,referral:e,password:f};this.checkData(h,g)&&d.ajax({url:d.REGISTER_URL,type:"post",data:h,noToken:!0,beforeSend:function(){},success:function(a){a&&0===a.result},error:function(a){},complete:function(){}})},checkData:function(a,b){return""===a.phone?(e.show({type:"info",message:"手机号不能为空"}),!1):""===a.code?(e.show({type:"info",message:"验证码不能为空"}),!1):""===a.password||""===b?(e.show({type:"info",message:"密码不能为空"}),!1):a.password!==b?(e.show({type:"info",message:"两次输入的密码不一致"}),!1):!0}})});