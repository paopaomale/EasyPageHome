define(["butterfly/view","butterfly","text!account/reset-pwd.html","account/account-client","dialog"],function(a,b,c,d,e){return a.extend({events:{"click .go-back":"goBack","click .register_box_row":"focusInput","click #submite":"onResetPwd","input .input-close":"isCloseHide","click .close-container":"clearInput"},render:function(a){a&&a.code&&(this._code=a.code,this._phone=a.phone)},onShow:function(){},focusInput:function(a){$(a.currentTarget).find("input").focus()},onResetPwd:function(){var a=this.$("#password input").val(),b={username:this._phone,code:this._code,password:a};this.checkData(b)&&d.ajax({url:d.USER_FORGET_URL,type:"post",data:b,noToken:!0,beforeSend:function(){},success:function(a){a&&0===a.result?(e.showToast("设置密码成功"),butterfly.back()):e.showToast(a.error)},complete:function(){}})},checkData:function(a){return""===a.username&&""===a.code?(e.showToast("参数异常"),!1):""===a.password?(e.showToast("密码不能为空"),!1):!0},isCloseHide:function(a){var b=$(a.currentTarget);0!=b.val().trim().length?b.next().show():b.next().hide()},clearInput:function(a){$(a.currentTarget).prev().val(""),$(a.currentTarget).hide()}})});