define(["butterfly/view","butterfly","text!account/reset-pwd-before.html","account/account-client","dialog"],function(a,b,c,d,e){return a.extend({events:{"click .go-back":"goBack","click .register_box_row":"focusInput","click .getCode":"getCode","click #submite":"onNext","input .input-close":"isCloseHide","click .close-container":"clearInput"},render:function(){},onShow:function(){},focusInput:function(a){$(a.currentTarget).find("input").focus()},getCode:function(a){a.stopPropagation(),console.log("getCode");var b=this.$("#phone input").val().trim();if(""===b)return void e.showToast("手机号不能为空");var c={phone:b};d.ajax({url:d.AUTH_SMS_URL,type:"post",data:c,noToken:!0,beforeSend:function(){},success:function(a){a&&0===a.result?e.showToast("获取验证码成功"):e.showToast(a.error)},complete:function(){}})},onNext:function(){var a=this.$("#phone input").val().trim(),b=this.$("#code input").val().trim(),c={phone:a,code:b};this.checkData(c)&&d.ajax({url:d.AUTH_CHECKSMS_URL,type:"post",data:c,noToken:!0,beforeSend:function(){},success:function(c){c&&0===c.result?butterfly.navigate("account/reset-pwd.html",{code:b,phone:a}):e.showToast(c.error)},complete:function(){}})},checkData:function(a){return""===a.phone?(e.showToast("手机号不能为空"),!1):""===a.code?(e.showToast("验证码不能为空"),!1):!0},isCloseHide:function(a){var b=$(a.currentTarget);0!=b.val().trim().length?b.next().show():b.next().hide()},clearInput:function(a){$(a.currentTarget).prev().val(""),$(a.currentTarget).hide()}})});