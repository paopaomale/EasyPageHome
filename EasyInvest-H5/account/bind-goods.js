define(["butterfly/view","butterfly","../account/account-client","../shared/js/loading","dialog"],function(a,b,c,d,e){return a.extend({events:{"click .go-back":"goBack","click #selectBindGoods":"selectGoods","click #subBindGoods":"bindGoods","click #trading-rules":"tradingRules"},render:function(){var a=this;a.initLoading(),a.getBindGoodsList()},onShow:function(){console.log("render")},tradingRules:function(){butterfly.navigate("account/integral-trading-rules.html")},initLoading:function(){this.loading=new d({parentEl:this.$(".container")[0]})},selectGoods:function(){var a=this;setTimeout(function(){a.$("#selectBindGoods").mobiscroll("show")},300)},bindGoods:function(){var a=this,b={pid:"",account:""};c.bindGoods({data:b,beforeSend:function(){a.loading&&a.loading.show()},success:function(a){0==a.result&&e.showToast("绑定成功")},error:function(){},complete:function(){a.loading&&a.loading.hide()}})},initMobiscroll:function(a){var b=this,c={theme:"ios",mode:"Scroller",display:"bottom",lang:"zh",context:b.$el,inputClass:"all-goods-input",onShow:function(a){},onSelect:function(a,b){console.log("ff")}},d=_.template(b.$el.find("#all-goods-list-template").html()),e="";_.each(a.data,function(a){e+=d(a)}),b.$el.find("#selectGoods").html(e),b.$el.find("#selectGoods").mobiscroll().select(c)},selectGoods:function(){var a=this;setTimeout(function(){a.$("#selectGoods").mobiscroll("show")},300)},getBindGoodsList:function(){var a=this,b={};c.getAllGoodsList({data:b,beforeSend:function(){a.loading&&a.loading.show()},success:function(b){console.log(b),a.initMobiscroll(b)},error:function(a){console.log(4)},complete:function(){a.loading&&a.loading.hide()}})}})});