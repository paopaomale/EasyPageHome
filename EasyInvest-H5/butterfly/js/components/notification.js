define(["backbone","spin","css!framework/css/notification.css"],function(a,b){return a.View.extend({className:"notification",defaults:{duration:2e3,autoDismiss:!0,type:"info",showSpin:!1},initialize:function(a){_.extend(this,this.defaults,a),this.el.classList.add(this.type),this.el.innerHTML=a.message,document.body.appendChild(this.el),this.showSpin&&(this.spinner=new b({left:"20px",lines:7,speed:1.3,length:3,radius:3,color:"#666"}).spin(this.el))},remove:function(){this.timeout&&clearTimeout(this.timeout),this.spinner&&this.spinner.stop(),a.View.prototype.remove.call(this,arguments)},show:function(){if(this.el.classList.add("active"),this.autoDismiss){var a=this;this.timeout=setTimeout(function(){a.dismiss()},this.duration)}},dismiss:function(){this.el.classList.remove("active");var a=this,b=function(){a.el.removeEventListener("webkitTransitionEnd",b),a.el.removeEventListener("msTransitionEnd",b),a.el.removeEventListener("oTransitionEnd",b),a.el.removeEventListener("otransitionend",b),a.el.removeEventListener("transitionend",b),a.remove(),a.onDismiss&&a.onDismiss()};this.el.addEventListener("webkitTransitionEnd",b),this.el.addEventListener("msTransitionEnd",b),this.el.addEventListener("oTransitionEnd",b),this.el.addEventListener("otransitionend",b),this.el.addEventListener("transitionend",b)}},{show:function(a){var b=new this(a);return setTimeout(function(){b.show()},0),b}})});